{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{auth,googleAuthProvider}from'../../firebase';import{GoogleAuthProvider,signInWithPopup}from\"firebase/auth\";import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{sendSignInLinkToEmail,signInWithEmailAndPassword,getAuth}from'firebase/auth';import{Button}from\"antd\";import{MailOutlined,GoogleOutlined}from\"@ant-design/icons\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const{user}=useSelector(state=>({...state}));const provider=new GoogleAuthProvider();let dispatch=useDispatch();useEffect(()=>{if(user&&user.token){window.history.pushState({},undefined,\"/\");window.location.reload();}},[user]);const handleSubmit=async e=>{e.preventDefault();const auth=getAuth();const result=await signInWithEmailAndPassword(auth,email,password).then(userCredential=>{// Signed in \nconst user=userCredential.user;dispatch({type:\"LOGGED_IN_USER\",payload:{email:user.email,token:user.accessToken,userName:user.displayName}});window.location.reload();}).catch(error=>{console.log(error);if(error.code===\"auth/invalid-login-credentials\"){toast.error(\"Sai tên tài khoản hoặc mật khẩu\");}});window.history.pushState({},undefined,\"/\");};const googleLogin=async e=>{const auth=getAuth();const result=signInWithPopup(auth,provider).then(async result=>{// console.log(result);\nconst{user}=result;dispatch({type:\"LOGGED_IN_USER\",payload:{email:user.email,token:user.accessToken}});window.location.reload();}).catch(error=>{});window.history.pushState({},undefined,\"/\");};const loginForm=()=>/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{autoFocus:true,type:\"email\",value:email,className:\"form-control\",onChange:e=>{setEmail(e.target.value);},placeholder:\"Nh\\u1EADp email\",style:{margin:'10px 0'}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,className:\"form-control\",onChange:e=>{setPassword(e.target.value);},placeholder:\"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",style:{margin:'10px 0'}}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,type:\"primary\",className:\"mb-3\",block:true,shape:\"round\",icon:/*#__PURE__*/_jsx(MailOutlined,{}),size:\"large\",disabled:!email||password.length<6,children:\"\\u0110\\u0103ng nh\\u1EADp b\\u1EB1ng Email\"}),/*#__PURE__*/_jsx(Button,{onClick:googleLogin,type:\"primary\",danger:true,className:\"mb-3\",block:true,shape:\"round\",icon:/*#__PURE__*/_jsx(GoogleOutlined,{}),size:\"large\",children:\"\\u0110\\u0103ng nh\\u1EADp b\\u1EB1ng Gmail\"}),/*#__PURE__*/_jsx(Link,{to:\"/forgot/password\",className:\"float-end text-danger\",children:\"Qu\\xEAn m\\u1EADt kh\\u1EA9u\"})]});return/*#__PURE__*/_jsx(\"div\",{className:\"container p-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Login\"}),loginForm()]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","auth","googleAuthProvider","GoogleAuthProvider","signInWithPopup","toast","sendSignInLinkToEmail","signInWithEmailAndPassword","getAuth","Button","MailOutlined","GoogleOutlined","useDispatch","useSelector","Link","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","user","state","provider","dispatch","token","window","history","pushState","undefined","location","reload","handleSubmit","e","preventDefault","result","then","userCredential","type","payload","accessToken","userName","displayName","catch","error","console","log","code","googleLogin","loginForm","children","autoFocus","value","className","onChange","target","placeholder","style","margin","onClick","block","shape","icon","size","disabled","length","danger","to"],"sources":["C:/Users/MTBH.vn/Documents/GitHub/ecomerce/client/src/pages/auth/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {auth, googleAuthProvider} from '../../firebase';\r\nimport { GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { sendSignInLinkToEmail, signInWithEmailAndPassword, getAuth } from 'firebase/auth';\r\nimport { Button } from \"antd\";\r\nimport { MailOutlined, GoogleOutlined } from \"@ant-design/icons\";\r\nimport { useDispatch, useSelector} from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Login = () =>{\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const {user} = useSelector((state) => ({...state}))\r\n    const provider = new GoogleAuthProvider();\r\n    let dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        if(user && user.token){\r\n            window.history.pushState({}, undefined, \"/\")\r\n            window.location.reload()\r\n        } \r\n    }, [user])\r\n\r\n\r\n    const handleSubmit = async (e)=>{\r\n        e.preventDefault()\r\n        const auth = getAuth();\r\n        const result = await signInWithEmailAndPassword(auth, email, password)\r\n        .then((userCredential) => {\r\n            // Signed in \r\n            const user = userCredential.user;\r\n            dispatch({\r\n                type: \"LOGGED_IN_USER\",\r\n                payload: {\r\n                    email: user.email,\r\n                    token: user.accessToken,\r\n                    userName: user.displayName\r\n                }\r\n            })\r\n            window.location.reload()\r\n        })\r\n        .catch((error) => {\r\n            console.log(error)\r\n            if (error.code === \"auth/invalid-login-credentials\") {\r\n                toast.error(\"Sai tên tài khoản hoặc mật khẩu\");\r\n            }\r\n        });\r\n        window.history.pushState({}, undefined, \"/\")\r\n    }\r\n\r\n    const googleLogin = async (e) => {\r\n        const auth = getAuth()\r\n        const result = signInWithPopup(auth, provider)\r\n        .then(async (result) => {\r\n            // console.log(result);\r\n            const {user} = result;\r\n            dispatch({\r\n                type: \"LOGGED_IN_USER\",\r\n                payload: {\r\n                    email: user.email,\r\n                    token: user.accessToken\r\n                }\r\n            })\r\n            window.location.reload()\r\n        })\r\n        .catch((error)=> {\r\n\r\n        })\r\n        window.history.pushState({}, undefined, \"/\")\r\n    }  \r\n\r\n    const loginForm = () => \r\n    <form>\r\n        <input autoFocus type=\"email\" value={email} className='form-control' onChange={e => {setEmail(e.target.value)}} placeholder=\"Nhập email\" style={{margin: '10px 0'}}></input>\r\n        <input type=\"password\" value={password} className='form-control' onChange={e => {setPassword(e.target.value)}} placeholder=\"Nhập mật khẩu\"style={{margin: '10px 0'}}></input>\r\n        <Button\r\n        onClick={handleSubmit}\r\n        type=\"primary\"\r\n        className='mb-3' \r\n        block \r\n        shape='round'\r\n        icon={<MailOutlined />}\r\n        size=\"large\"\r\n        disabled={!email || password.length < 6}>Đăng nhập bằng Email</Button>\r\n\r\n        <Button\r\n        onClick={googleLogin}\r\n        type=\"primary\"\r\n        danger\r\n        className='mb-3' \r\n        block \r\n        shape='round'\r\n        icon={<GoogleOutlined />}\r\n        size=\"large\">Đăng nhập bằng Gmail</Button>\r\n\r\n        <Link to=\"/forgot/password\" className=\"float-end text-danger\">Quên mật khẩu</Link>\r\n    </form>\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h4>Login</h4>\r\n                    {loginForm()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}