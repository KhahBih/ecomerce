{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{auth,googleAuthProvider}from'../../firebase';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{sendSignInLinkToEmail,signInWithEmailAndPassword,getAuth,sendPasswordResetEmail,fetchSignInMethodsForEmail}from'firebase/auth';import{Button}from\"antd\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPassword=()=>{const[email,setEmail]=useState(\"\");const{user}=useSelector(state=>({...state}));useEffect(()=>{if(user&&user.token){window.history.pushState({},undefined,\"/\");window.location.reload();}},[user]);const config={url:\"http://localhost:3000/login\",handleCodeInApp:true};const handleSubmit=async e=>{e.preventDefault();const auth=getAuth();await sendPasswordResetEmail(auth,email,config).then(()=>{setEmail('');toast.success('Check ur email 4 password reset link');}).catch(error=>{if(email===\"\"&&error.code===\"auth/missing-email\"){toast.error(\"Hãy nhập email\");}if(email&&error.code===\"auth/missing-email\"){toast.error(\"Email không tồn tại\");}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container col-md-6 offset-md-3 p-5\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Forgot password\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{autoFocus:true,type:\"email\",value:email,className:\"form-control\",onChange:e=>{setEmail(e.target.value);},placeholder:\"Nh\\u1EADp email\",style:{margin:'10px 0'}}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-raised\",type:\"primary\",block:true,size:\"large\",onClick:handleSubmit,children:\"Submit\"})]})]});};export default ForgotPassword;","map":{"version":3,"names":["React","useState","useEffect","auth","googleAuthProvider","toast","sendSignInLinkToEmail","signInWithEmailAndPassword","getAuth","sendPasswordResetEmail","fetchSignInMethodsForEmail","Button","useSelector","jsx","_jsx","jsxs","_jsxs","ForgotPassword","email","setEmail","user","state","token","window","history","pushState","undefined","location","reload","config","url","handleCodeInApp","handleSubmit","e","preventDefault","then","success","catch","error","code","className","children","autoFocus","type","value","onChange","target","placeholder","style","margin","block","size","onClick"],"sources":["C:/Users/MTBH.vn/Documents/GitHub/ecomerce/client/src/pages/auth/ForgotPassword.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {auth, googleAuthProvider} from '../../firebase';\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { sendSignInLinkToEmail, signInWithEmailAndPassword, getAuth, sendPasswordResetEmail, fetchSignInMethodsForEmail} from 'firebase/auth';\r\nimport { Button } from \"antd\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst ForgotPassword = () => {\r\n    const [email, setEmail] = useState(\"\")\r\n    const {user} = useSelector((state) => ({...state}))\r\n\r\n    useEffect(() => {\r\n        if(user && user.token){\r\n            window.history.pushState({}, undefined, \"/\")\r\n            window.location.reload()\r\n        } \r\n    }, [user])\r\n\r\n    const config = {\r\n        url: `http://localhost:3000/login`,\r\n        handleCodeInApp: true\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        const auth = getAuth()\r\n            await sendPasswordResetEmail(auth, email, config)\r\n            .then(() => {\r\n                setEmail('')\r\n                toast.success('Check ur email 4 password reset link')\r\n            })\r\n            .catch((error) => {\r\n                if(email === \"\" && error.code === \"auth/missing-email\"){\r\n                    toast.error(\"Hãy nhập email\")\r\n                }\r\n                if(email && error.code === \"auth/missing-email\"){\r\n                    toast.error(\"Email không tồn tại\")\r\n                }\r\n            })\r\n    }\r\n\r\n    return(\r\n        <div className=\"container col-md-6 offset-md-3 p-5\">\r\n            <h4>Forgot password</h4>\r\n            <form>\r\n                <input autoFocus type=\"email\" value={email} className='form-control' onChange={e => {setEmail(e.target.value)}} \r\n                placeholder=\"Nhập email\" style={{margin: '10px 0'}}></input>\r\n                <Button className=\"btn btn-raised\" type=\"primary\" block size=\"large\"  onClick={handleSubmit}>Submit</Button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\nexport default ForgotPassword;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAAQC,IAAI,CAAEC,kBAAkB,KAAO,gBAAgB,CACvD,OAAQC,KAAK,KAAO,gBAAgB,CACpC,MAAO,uCAAuC,CAC9C,OAASC,qBAAqB,CAAEC,0BAA0B,CAAEC,OAAO,CAAEC,sBAAsB,CAAEC,0BAA0B,KAAO,eAAe,CAC7I,OAASC,MAAM,KAAQ,MAAM,CAC7B,OAASC,WAAW,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACmB,IAAI,CAAC,CAAGR,WAAW,CAAES,KAAK,GAAM,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,CAEnDnB,SAAS,CAAC,IAAM,CACZ,GAAGkB,IAAI,EAAIA,IAAI,CAACE,KAAK,CAAC,CAClBC,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,CAAEC,SAAS,CAAE,GAAG,CAAC,CAC5CH,MAAM,CAACI,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CACJ,CAAC,CAAE,CAACR,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAS,MAAM,CAAG,CACXC,GAAG,8BAA+B,CAClCC,eAAe,CAAE,IACrB,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAA/B,IAAI,CAAGK,OAAO,CAAC,CAAC,CAClB,KAAM,CAAAC,sBAAsB,CAACN,IAAI,CAAEe,KAAK,CAAEW,MAAM,CAAC,CAChDM,IAAI,CAAC,IAAM,CACRhB,QAAQ,CAAC,EAAE,CAAC,CACZd,KAAK,CAAC+B,OAAO,CAAC,sCAAsC,CAAC,CACzD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,CACd,GAAGpB,KAAK,GAAK,EAAE,EAAIoB,KAAK,CAACC,IAAI,GAAK,oBAAoB,CAAC,CACnDlC,KAAK,CAACiC,KAAK,CAAC,gBAAgB,CAAC,CACjC,CACA,GAAGpB,KAAK,EAAIoB,KAAK,CAACC,IAAI,GAAK,oBAAoB,CAAC,CAC5ClC,KAAK,CAACiC,KAAK,CAAC,qBAAqB,CAAC,CACtC,CACJ,CAAC,CAAC,CACV,CAAC,CAED,mBACItB,KAAA,QAAKwB,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eAC/C3B,IAAA,OAAA2B,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBzB,KAAA,SAAAyB,QAAA,eACI3B,IAAA,UAAO4B,SAAS,MAACC,IAAI,CAAC,OAAO,CAACC,KAAK,CAAE1B,KAAM,CAACsB,SAAS,CAAC,cAAc,CAACK,QAAQ,CAAEZ,CAAC,EAAI,CAACd,QAAQ,CAACc,CAAC,CAACa,MAAM,CAACF,KAAK,CAAC,EAAE,CAC/GG,WAAW,CAAC,iBAAY,CAACC,KAAK,CAAE,CAACC,MAAM,CAAE,QAAQ,CAAE,CAAQ,CAAC,cAC5DnC,IAAA,CAACH,MAAM,EAAC6B,SAAS,CAAC,gBAAgB,CAACG,IAAI,CAAC,SAAS,CAACO,KAAK,MAACC,IAAI,CAAC,OAAO,CAAEC,OAAO,CAAEpB,YAAa,CAAAS,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC1G,CAAC,EACN,CAAC,CAEd,CAAC,CACD,cAAe,CAAAxB,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}